<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<title>KuPS & KalPa ‚Äì Seuraavat pelit</title>
<style>
body { font-family: Arial; background:#f5f5f5; padding:20px; }
h1 { text-align:center; }
.team { background:#fff; padding:15px; margin:20px 0; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.match { border-bottom:1px solid #ddd; padding:6px 0; }
.match:last-child { border-bottom:none; }
.date { font-weight:bold; }
</style>
</head>
<body>

<h1>Seuraavat pelit</h1>

<div class="team">
  <h2>‚öΩ KuPS</h2>
  <div id="kups">Ladataan...</div>
</div>

<div class="team">
  <h2>üèí KalPa</h2>
  <div id="kalpa">Ladataan...</div>
</div>

<script>
fetch("matches.json")
  .then(res => res.json())
  .then(data => {
    const now = new Date();

    function renderNextMatches(containerId, matches, count=3){
      const container = document.getElementById(containerId);
      container.innerHTML = "";

      // Suodatetaan tulevat pelit
      const upcoming = matches
        .map(m => ({...m, dateObj: new Date(m.date)}))
        .filter(m => m.dateObj >= now)
        .sort((a,b) => a.dateObj - b.dateObj)
        .slice(0, count);

      if (upcoming.length === 0){
        container.innerText = "Ei l√§hiaikoina pelej√§.";
        return;
      }

      upcoming.forEach(m => {
        const div = document.createElement("div");
        div.className = "match";
        div.innerHTML = `<div class="date">${m.dateObj.toLocaleString("fi-FI")}</div>
                         <div>${m.home} ‚Äì ${m.away}</div>`;
        container.appendChild(div);
      });
    }

    renderNextMatches("kups", data.kups);
    renderNextMatches("kalpa", data.kalpa);
  })
  .catch(e => console.error("JSON fetch error:", e));
</script>

</body>
</html>
